<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modern Community - Emergency Chat Platform</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <!-- Login Screen -->
    <div id="loginScreen" class="login-screen">
        <div class="login-container">
            <div class="login-header">
                <h1><i class="fas fa-shield-alt"></i> Modern Community</h1>
                <p>Emergency Response Platform</p>
            </div>
            <div class="login-form">
                <h2>Select Demo User</h2>
                <div class="user-selection">
                    <div class="user-card" data-user-id="user_001">
                        <img src="https://i.pravatar.cc/150?img=1" alt="Priya">
                        <div class="user-info">
                            <h3>Priya</h3>
                            <p>Member ‚Ä¢ Sector 4, East Zone</p>
                        </div>
                    </div>
                    <div class="user-card" data-user-id="user_002">
                        <img src="https://i.pravatar.cc/150?img=2" alt="Rahul">
                        <div class="user-info">
                            <h3>Rahul</h3>
                            <p>Member ‚Ä¢ Sector 3, East Zone</p>
                        </div>
                    </div>
                    <div class="user-card" data-user-id="user_003">
                        <img src="https://i.pravatar.cc/150?img=3" alt="Officer Anil">
                        <div class="user-info">
                            <h3>Officer Anil</h3>
                            <p>Police Responder ‚Ä¢ East Zone</p>
                        </div>
                    </div>
                    <div class="user-card" data-user-id="user_004">
                        <img src="https://i.pravatar.cc/150?img=4" alt="Dr. Meera">
                        <div class="user-info">
                            <h3>Dr. Meera</h3>
                            <p>Doctor ‚Ä¢ Emergency Medicine</p>
                        </div>
                    </div>
                    <div class="user-card" data-user-id="user_005">
                        <img src="https://i.pravatar.cc/150?img=5" alt="Fireman Raj">
                        <div class="user-info">
                            <h3>Fireman Raj</h3>
                            <p>Fire Responder ‚Ä¢ East Zone</p>
                        </div>
                    </div>
                    <div class="user-card" data-user-id="user_006">
                        <img src="https://i.pravatar.cc/150?img=6" alt="Sara">
                        <div class="user-info">
                            <h3>Sara</h3>
                            <p>Member ‚Ä¢ Sector 5, East Zone</p>
                        </div>
                    </div>
                    <div class="user-card" data-user-id="user_007">
                        <img src="https://i.pravatar.cc/150?img=7" alt="Elder Ramu">
                        <div class="user-info">
                            <h3>Elder Ramu</h3>
                            <p>Elder ‚Ä¢ Sector 4, East Zone</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Main App Interface -->
    <div id="appInterface" class="app-interface hidden">
        <!-- Sidebar -->
        <div class="sidebar">
            <!-- User Profile Header -->
            <div class="sidebar-header">
                <div class="current-user">
                    <img id="currentUserAvatar" src="" alt="User">
                    <div class="user-details">
                        <h3 id="currentUserName">User</h3>
                        <p id="currentUserLocation">Location</p>
                    </div>
                </div>
                <div class="header-actions">
                    <button class="settings-btn" title="Settings">
                        <i class="fas fa-cog"></i>
                    </button>
                    <button class="logout-btn" title="Logout">
                        <i class="fas fa-sign-out-alt"></i>
                    </button>
                </div>
            </div>

            <!-- Navigation Tabs -->
            <div class="nav-tabs">
                <button class="nav-tab active" data-tab="chats">
                    <i class="fas fa-comments"></i>
                    <span>Chats</span>
                    <span class="notification-badge" id="chatsBadge">0</span>
                </button>
                <button class="nav-tab" data-tab="communities">
                    <i class="fas fa-users"></i>
                    <span>Communities</span>
                </button>
                <button class="nav-tab" data-tab="emergency">
                    <i class="fas fa-exclamation-triangle"></i>
                    <span>Emergency</span>
                    <span class="notification-badge emergency" id="emergencyBadge">0</span>
                </button>
            </div>

            <!-- Tab Content -->
            <div class="tab-content">
                <!-- Chats Tab -->
                <div id="chatsTab" class="tab-panel active">
                    <div class="section-header">
                        <h4>Recent Chats</h4>
                    </div>
                    <div id="chatsList" class="chats-list">
                        <!-- Chat items will be populated by JS -->
                    </div>
                </div>

                <!-- Communities Tab -->
                <div id="communitiesTab" class="tab-panel hidden">
                    <div class="section-header">
                        <h4>Communities</h4>
                    </div>
                    <div id="communitiesList" class="communities-list">
                        <!-- Communities will be populated by JS -->
                    </div>
                </div>

                <!-- Emergency Tab -->
                <div id="emergencyTab" class="tab-panel hidden">
                    <div class="section-header">
                        <h4>Emergency Communities</h4>
                        <p class="section-subtitle">Unlock when alerts are triggered</p>
                    </div>
                    <div id="emergencyCommunitiesList" class="emergency-communities-list">
                        <!-- Emergency communities will be populated by JS -->
                    </div>
                    <div class="emergency-triggers">
                        <h5>Quick Emergency</h5>
                        <div class="trigger-buttons">
                            <button class="emergency-btn" data-trigger="/fire">üî• Fire</button>
                            <button class="emergency-btn" data-trigger="/doctor">‚öïÔ∏è Medical</button>
                            <button class="emergency-btn" data-trigger="/rape">üö® Police</button>
                            <button class="emergency-btn" data-trigger="/helpelder">üßì Elder Help</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Chat Area -->
        <div class="main-content">
            <!-- Welcome Screen -->
            <div id="welcomeScreen" class="welcome-screen">
                <div class="welcome-content">
                    <i class="fas fa-shield-alt welcome-icon"></i>
                    <h2>Welcome to Modern Community</h2>
                    <p>Select a community or start a chat to begin.</p>
                    <div class="welcome-features">
                        <div class="feature">
                            <i class="fas fa-bolt"></i>
                            <span>Emergency Alerts</span>
                        </div>
                        <div class="feature">
                            <i class="fas fa-users"></i>
                            <span>Community Support</span>
                        </div>
                        <div class="feature">
                            <i class="fas fa-headset"></i>
                            <span>24/7 Response</span>
                        </div>
                    </div>
                </div>
            </div>

            </div>

            <!-- Chat Area -->
            <div id="chatArea" class="chat-area hidden">
                <!-- Chat Header -->
                <div class="chat-header">
                    <div class="chat-info">
                        <img id="chatAvatar" src="" alt="Chat">
                        <div class="chat-details">
                            <h3 id="chatTitle">Community Name</h3>
                            <p id="chatSubtitle">Members online</p>
                        </div>
                    </div>
                    <div class="chat-actions">
                        <button class="action-btn" title="Search">
                            <i class="fas fa-search"></i>
                        </button>
                        <button class="action-btn" title="Emergency Info" id="emergencyInfoBtn">
                            <i class="fas fa-info-circle"></i>
                        </button>
                    </div>
                </div>

                <!-- Messages Container -->
                <div id="messagesContainer" class="messages-container">
                    <!-- Messages will be populated by JS -->
                </div>

                <!-- Message Input -->
                <div class="message-input-container">
                    <div class="emergency-commands">
                        <small>Emergency Commands: /fire, /doctor, /rape, /blood, /missing, /fund, /disaster, /helpelder</small>
                    </div>
                    <div class="message-input">
                        <button class="emergency-btn" id="emergencyMenuBtn" title="Emergency - Click for immediate help!">
                            <i class="fas fa-exclamation-triangle"></i>
                        </button>

                        <button class="attach-btn" title="Attach">
                            <i class="fas fa-paperclip"></i>
                        </button>
                        <input type="text" id="messageInput" placeholder="Type a message or emergency command..." autocomplete="off">
                        <button id="sendMessageBtn" class="send-btn" title="Send">
                            <i class="fas fa-paper-plane"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Emergency Popup -->
    <div id="emergencyPopup" class="emergency-popup hidden">
        <div class="popup-overlay"></div>
        <div class="popup-content">
            <div class="popup-header">
                <div class="emergency-icon">
                    <i class="fas fa-exclamation-triangle"></i>
                </div>
                <h3 id="emergencyTitle">EMERGENCY ALERT</h3>
                <p id="emergencyType">Fire Emergency</p>
            </div>
            <div class="popup-body">
                <div class="alert-details">
                    <div class="detail-item">
                        <i class="fas fa-user"></i>
                        <div>
                            <strong id="alertUser">User Name</strong>
                            <p id="alertUserDetails">Age, Gender, Blood Group</p>
                        </div>
                    </div>
                    <div class="detail-item">
                        <i class="fas fa-map-marker-alt"></i>
                        <div>
                            <strong id="alertLocation">Location</strong>
                            <p id="alertDistance">Distance</p>
                        </div>
                    </div>
                    <div class="detail-item">
                        <i class="fas fa-clock"></i>
                        <div>
                            <strong id="alertTime">Time</strong>
                            <p>Alert triggered</p>
                        </div>
                    </div>
                </div>
                <div class="user-profile">
                    <img id="alertUserAvatar" src="" alt="User" 
                         onerror="this.src='https://i.pravatar.cc/150?img=1'; this.onerror=null;">
                    <div class="profile-info">
                        <h4 id="profileName">User Name</h4>
                        <div class="medical-info">
                            <span id="profileBloodGroup" class="blood-group-tag">B+</span>
                            <span id="profileConditions" class="medical-conditions-tag">Medical Conditions</span>
                        </div>
                        <div class="emergency-contacts-preview" id="emergencyContactsPreview">
                            <!-- Emergency contacts will be shown here -->
                        </div>
                    </div>
                </div>
            </div>
            <div class="popup-actions">
                <button id="declineEmergency" class="decline-btn">
                    <i class="fas fa-times"></i>
                    Decline
                </button>
                <button id="acceptEmergency" class="accept-btn">
                    <i class="fas fa-check"></i>
                    Accept & Respond
                </button>
            </div>
            <div class="eta-input hidden" id="etaInput">
                <label for="responseEta">Estimated Arrival Time (minutes):</label>
                <input type="number" id="responseEta" min="1" max="60" value="5">
                <button id="confirmResponse" class="confirm-btn">Confirm Response</button>
            </div>
        </div>
    </div>

    <!-- User Profile Modal -->
    <div id="userProfileModal" class="modal hidden">
        <div class="modal-overlay"></div>
        <div class="modal-content profile-modal">
            <div class="modal-header">
                <h3><i class="fas fa-user-circle"></i> User Profile</h3>
                <button class="close-modal" data-modal="userProfileModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body profile-body">
                <!-- Profile Header -->
                <div class="profile-header">
                    <div class="profile-avatar-section">
                        <img id="profileAvatarImg" src="" alt="Profile" class="profile-avatar-large"
                             onerror="this.src='https://i.pravatar.cc/150?img=1'; this.onerror=null;">
                        <button id="changeAvatarBtn" class="change-avatar-btn" title="Change Avatar">
                            <i class="fas fa-camera"></i>
                        </button>
                    </div>
                    <div class="profile-basic-info">
                        <h2 id="profileUserName">User Name</h2>
                        <p id="profileUserRole" class="profile-role">Role</p>
                        <div class="profile-status">
                            <span id="profileOnlineStatus" class="status-indicator"></span>
                            <span id="profileLastSeen">Last seen</span>
                        </div>
                    </div>
                    <div class="profile-actions">
                        <button id="editProfileBtn" class="btn btn--primary">
                            <i class="fas fa-edit"></i> Edit Profile
                        </button>
                    </div>
                </div>

                <!-- Profile Content -->
                <div class="profile-content">
                    <!-- Personal Information -->
                    <div class="profile-section">
                        <h4><i class="fas fa-info-circle"></i> Personal Information</h4>
                        <div class="profile-info-grid">
                            <div class="info-item">
                                <label>Age</label>
                                <span id="profileAge">--</span>
                            </div>
                            <div class="info-item">
                                <label>Gender</label>
                                <span id="profileGender">--</span>
                            </div>
                            <div class="info-item">
                                <label>Blood Group</label>
                                <span id="profileBloodGroup" class="blood-group">--</span>
                            </div>
                            <div class="info-item">
                                <label>Phone Number</label>
                                <span id="profilePhone">--</span>
                            </div>
                        </div>
                    </div>

                    <!-- Location Information -->
                    <div class="profile-section">
                        <h4><i class="fas fa-map-marker-alt"></i> Location</h4>
                        <div class="location-info">
                            <div class="info-item">
                                <label>Address</label>
                                <span id="profileAddress">--</span>
                            </div>
                            <div class="info-item">
                                <label>Coordinates</label>
                                <span id="profileCoordinates">--</span>
                            </div>
                        </div>
                    </div>

                    <!-- Medical Information -->
                    <div class="profile-section">
                        <h4><i class="fas fa-heartbeat"></i> Medical Information</h4>
                        <div class="medical-info-section">
                            <div class="info-item">
                                <label>Medical Conditions</label>
                                <div id="profileMedicalConditions" class="medical-conditions">
                                    <!-- Medical conditions will be populated -->
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Emergency Contacts -->
                    <div class="profile-section">
                        <h4><i class="fas fa-phone-alt"></i> Emergency Contacts</h4>
                        <div id="profileEmergencyContacts" class="emergency-contacts">
                            <!-- Emergency contacts will be populated -->
                        </div>
                    </div>

                    <!-- Communities -->
                    <div class="profile-section">
                        <h4><i class="fas fa-users"></i> Communities</h4>
                        <div id="profileCommunities" class="profile-communities">
                            <!-- Communities will be populated -->
                        </div>
                    </div>

                    <!-- Responder Information (if applicable) -->
                    <div id="responderSection" class="profile-section hidden">
                        <h4><i class="fas fa-shield-alt"></i> Responder Information</h4>
                        <div class="responder-info-grid">
                            <div class="info-item">
                                <label>Responder Type</label>
                                <span id="profileResponderType">--</span>
                            </div>
                            <div class="info-item">
                                <label>Response Time</label>
                                <span id="profileResponseTime">--</span>
                            </div>
                            <div class="info-item">
                                <label>Badge/ID Number</label>
                                <span id="profileBadgeNumber">--</span>
                            </div>
                            <div class="info-item">
                                <label>Specialization</label>
                                <span id="profileSpecialization">--</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Edit Profile Modal -->
    <div id="editProfileModal" class="modal hidden">
        <div class="modal-overlay"></div>
        <div class="modal-content edit-profile-modal">
            <div class="modal-header">
                <h3><i class="fas fa-user-edit"></i> Edit Profile</h3>
                <button class="close-modal" data-modal="editProfileModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="editProfileForm" class="edit-profile-form">
                    <!-- Personal Information -->
                    <div class="form-section">
                        <h4>Personal Information</h4>
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="editName" class="form-label">Name</label>
                                <input type="text" id="editName" class="form-control" required>
                            </div>
                            <div class="form-group">
                                <label for="editAge" class="form-label">Age</label>
                                <input type="number" id="editAge" class="form-control" min="1" max="120" required>
                            </div>
                            <div class="form-group">
                                <label for="editGender" class="form-label">Gender</label>
                                <select id="editGender" class="form-control" required>
                                    <option value="">Select Gender</option>
                                    <option value="Male">Male</option>
                                    <option value="Female">Female</option>
                                    <option value="Other">Other</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="editBloodGroup" class="form-label">Blood Group</label>
                                <select id="editBloodGroup" class="form-control" required>
                                    <option value="">Select Blood Group</option>
                                    <option value="A+">A+</option>
                                    <option value="A-">A-</option>
                                    <option value="B+">B+</option>
                                    <option value="B-">B-</option>
                                    <option value="AB+">AB+</option>
                                    <option value="AB-">AB-</option>
                                    <option value="O+">O+</option>
                                    <option value="O-">O-</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="editPhone" class="form-label">Phone Number</label>
                                <input type="tel" id="editPhone" class="form-control" placeholder="+91-XXXXXXXXXX">
                            </div>
                        </div>
                    </div>

                    <!-- Location Information -->
                    <div class="form-section">
                        <h4>Location</h4>
                        <div class="form-group">
                            <label for="editAddress" class="form-label">Address</label>
                            <textarea id="editAddress" class="form-control" rows="3" placeholder="Enter your address"></textarea>
                        </div>
                    </div>

                    <!-- Medical Information -->
                    <div class="form-section">
                        <h4>Medical Information</h4>
                        <div class="form-group">
                            <label for="editMedicalConditions" class="form-label">Medical Conditions</label>
                            <textarea id="editMedicalConditions" class="form-control" rows="3" placeholder="Enter medical conditions (comma separated)"></textarea>
                        </div>
                    </div>

                    <!-- Emergency Contacts -->
                    <div class="form-section">
                        <h4>Emergency Contacts</h4>
                        <div id="editEmergencyContacts" class="emergency-contacts-edit">
                            <!-- Emergency contacts edit fields will be populated -->
                        </div>
                        <button type="button" id="addEmergencyContactBtn" class="btn btn--outline">
                            <i class="fas fa-plus"></i> Add Emergency Contact
                        </button>
                    </div>

                    <!-- Form Actions -->
                    <div class="form-actions">
                        <button type="button" class="btn btn--secondary" data-action="cancel">
                            <i class="fas fa-times"></i> Cancel
                        </button>
                        <button type="submit" class="btn btn--primary">
                            <i class="fas fa-save"></i> Save Changes
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Avatar Selection Modal -->
    <div id="avatarSelectionModal" class="modal hidden">
        <div class="modal-overlay"></div>
        <div class="modal-content avatar-modal">
            <div class="modal-header">
                <h3><i class="fas fa-images"></i> Select Avatar</h3>
                <button class="close-modal" data-modal="avatarSelectionModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="avatar-grid">
                    <!-- Avatar options will be populated -->
                </div>
            </div>
        </div>
    </div>

    <!-- Emergency Cases History -->
    <div id="emergencyCasesModal" class="modal hidden">
        <div class="modal-overlay"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h3>Emergency Cases History</h3>
                <button class="close-modal" data-modal="emergencyCasesModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div id="emergencyCasesList" class="cases-list">
                    <!-- Cases will be populated by JS -->
                </div>
            </div>
        </div>
    </div>

    <!-- Notification Center -->
    <div id="notificationCenter" class="notification-center">
        <!-- Notifications will be added dynamically -->
    </div>

    <!-- Sound Controls -->
    <div class="sound-controls">
        <button id="soundToggle" class="sound-toggle" title="Toggle Sound">
            <i class="fas fa-volume-up"></i>
        </button>
        <input type="range" id="volumeSlider" class="volume-slider" min="0" max="100" value="70">
    </div>

    <!-- Audio Elements -->
    <audio id="messageSentSound" preload="auto">
        <source src="data:audio/wav;base64,UklGRuQEAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YcAEAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmQeCyV9y+/YhzUHHm7A7OGXSQwKdNT027FeGAhJr9v4tJhRE2j+z/DCgDIIMm+98uWWTQyE0fLGjEIMBnz/zu1xNQcpfNr2z4s3CRZewN75nFICETGp1/imUROCx+7FggGcAnAABAAABAAIAAQACAAABAAABAAIAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmQeCyV9y+/YhzUHHm7A7OGXSQwKdNT027FeGAhJr9v4tJhRE2j+z/DCgDIIMm+98uWWTQyE0fLGjEIMBnz/zu1xNQcpfNr2z4s3CRZewN75nFICETGp1/imUROCx+7FggGcAnAABAAABAAIAAQACAAABAAABAAIAAA=" type="audio/wav">
    </audio>
    <audio id="messageReceivedSound" preload="auto">
        <source src="data:audio/wav;base64,UklGRuQEAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YcAEAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmQeCyV9y+/YhzUHHm7A7OGXSQwKdNT027FeGAhJr9v4tJhRE2j+z/DCgDIIMm+98uWWTQyE0fLGjEIMBnz/zu1xNQcpfNr2z4s3CRZewN75nFICETGp1/imUROCx+7FggGcAnAABAAABAAIAAQACAAABAAABAAIAAA=" type="audio/wav">
    </audio>
    <audio id="emergencySound" preload="auto">
        <source src="data:audio/wav;base64,UklGRiQBAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQAAAAA=" type="audio/wav">
    </audio>

    <!-- Emergency Modal -->
    <div id="emergencyModal" class="emergency-modal">
        <div class="emergency-modal-content">
            <div class="emergency-modal-header">
                <h2>üö® Emergency Response System</h2>
                <button class="emergency-close" id="emergencyClose">√ó</button>
            </div>
            <div class="emergency-modal-body">
                <p>Select emergency type for immediate response:</p>
                <div class="emergency-options">
                    <button class="emergency-option fire" data-type="fire">
                        <i class="fas fa-fire"></i>
                        <span>Fire Emergency</span>
                        <small>Fire, explosion, or immediate danger</small>
                    </button>
                    <button class="emergency-option medical" data-type="blood">
                        <i class="fas fa-tint"></i>
                        <span>Blood Emergency</span>
                        <small>Blood loss or critical bleeding</small>
                    </button>
                    <button class="emergency-option rape" data-type="rape">
                        <i class="fas fa-shield-alt"></i>
                        <span>Sexual Assault</span>
                        <small>Emergency protection needed</small>
                    </button>
                    <button class="emergency-option medical" data-type="medical">
                        <i class="fas fa-plus-square"></i>
                        <span>Medical Emergency</span>
                        <small>Health crisis requiring immediate care</small>
                    </button>
                    <button class="emergency-option disaster" data-type="disaster">
                        <i class="fas fa-exclamation-triangle"></i>
                        <span>Disaster</span>
                        <small>Natural disaster or major incident</small>
                    </button>
                    <button class="emergency-option community" data-type="elderly">
                        <i class="fas fa-hand-holding-heart"></i>
                        <span>Elderly Help</span>
                        <small>Senior citizen needs assistance</small>
                    </button>
                    <button class="emergency-option community" data-type="development">
                        <i class="fas fa-tools"></i>
                        <span>Community Development</span>
                        <small>Infrastructure or development issue</small>
                    </button>
                    <button class="emergency-option accident" data-type="accident">
                        <i class="fas fa-car-crash"></i>
                        <span>Accident</span>
                        <small>Traffic or other accident</small>
                    </button>
                    <button class="emergency-option custom" data-type="custom">
                        <i class="fas fa-edit"></i>
                        <span>Other Emergency</span>
                        <small>Describe your emergency</small>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Emergency Confirmation Modal -->
    <div id="emergencyConfirmModal" class="emergency-modal">
        <div class="emergency-modal-content confirmation">
            <div class="emergency-modal-header">
                <h2>‚ö†Ô∏è Confirm Emergency</h2>
            </div>
            <div class="emergency-modal-body">
                <div id="emergencyConfirmDetails">
                    <!-- Emergency details will be filled here -->
                </div>
                <div class="emergency-location">
                    <label for="emergencyLocation">Your Location:</label>
                    <input type="text" id="emergencyLocation" placeholder="Enter your current location" required>
                </div>
                <div class="emergency-description">
                    <label for="emergencyDescription">Additional Details:</label>
                    <textarea id="emergencyDescription" placeholder="Describe the situation (optional)" rows="3"></textarea>
                </div>
                <div class="emergency-confirmation-buttons">
                    <button id="confirmEmergency" class="emergency-confirm-btn">
                        <i class="fas fa-exclamation-triangle"></i>
                        Confirm Emergency
                    </button>
                    <button id="cancelEmergency" class="emergency-cancel-btn">
                        <i class="fas fa-times"></i>
                        Cancel
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Floating Help Chatbot (Completely Independent) -->
    <!-- Help Chatbot Button -->
    <div id="helpChatbotButton" class="help-chatbot-button">
        <div class="robot-icon">
            <i class="fas fa-robot"></i>
        </div>
        <div class="help-tooltip">Need Help? Click me! ü§ñ</div>
    </div>

    <!-- Voice Commands Modal -->
    <div id="voiceCommandsModal" class="voice-commands-modal hidden">
        <div class="voice-modal-overlay"></div>
        <div class="voice-modal-content">
            <div class="voice-modal-header">
                <div class="voice-header-icon">
                    <i class="fas fa-microphone"></i>
                </div>
                <div class="voice-header-text">
                    <h3>üé§ Voice Commands Guide</h3>
                    <p>Speak these keywords to trigger emergencies instantly</p>
                </div>
                <button class="voice-modal-close" id="voiceModalClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>

            <div class="voice-modal-body">
                <!-- Voice Status Indicator -->
                <div class="voice-status-section">
                    <div class="voice-status-indicator" id="voiceStatusIndicator">
                        <div class="status-icon">
                            <i class="fas fa-microphone" id="voiceStatusIcon"></i>
                        </div>
                        <div class="status-text">
                            <span id="voiceStatusText">Click microphone to start listening</span>
                        </div>
                    </div>
                    <div class="voice-instructions">
                        <small>üí° <strong>How to use:</strong> Click the microphone button, then speak any emergency keyword clearly</small>
                    </div>
                </div>

                <!-- Critical Emergency Commands -->
                <div class="voice-commands-section">
                    <h4>üö® Critical Emergency Commands</h4>
                    <div class="voice-commands-grid">
                        <div class="voice-command-card critical">
                            <div class="command-icon">üî•</div>
                            <div class="command-details">
                                <div class="command-keyword">"fire"</div>
                                <div class="command-description">Fire, explosion, or immediate danger</div>
                                <div class="command-triggers">Triggers: /fire command</div>
                            </div>
                        </div>

                        <div class="voice-command-card critical">
                            <div class="command-icon">üõ°Ô∏è</div>
                            <div class="command-details">
                                <div class="command-keyword">"rape"</div>
                                <div class="command-description">Sexual assault or emergency protection</div>
                                <div class="command-triggers">Triggers: /rape command (anonymous)</div>
                            </div>
                        </div>

                        <div class="voice-command-card critical">
                            <div class="command-icon">ü©∏</div>
                            <div class="command-details">
                                <div class="command-keyword">"blood"</div>
                                <div class="command-description">Critical blood loss or donation needed</div>
                                <div class="command-triggers">Triggers: /blood command</div>
                            </div>
                        </div>

                        <div class="voice-command-card critical">
                            <div class="command-icon">‚öïÔ∏è</div>
                            <div class="command-details">
                                <div class="command-keyword">"medical"</div>
                                <div class="command-description">Health crisis requiring immediate care</div>
                                <div class="command-triggers">Triggers: /doctor command</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- High Priority Commands -->
                <div class="voice-commands-section">
                    <h4>üü° High Priority Commands</h4>
                    <div class="voice-commands-grid">
                        <div class="voice-command-card high">
                            <div class="command-icon">üå™Ô∏è</div>
                            <div class="command-details">
                                <div class="command-keyword">"disaster"</div>
                                <div class="command-description">Natural disaster or major incident</div>
                                <div class="command-triggers">Triggers: /disaster command</div>
                            </div>
                        </div>

                        <div class="voice-command-card high">
                            <div class="command-icon">üîç</div>
                            <div class="command-details">
                                <div class="command-keyword">"missing"</div>
                                <div class="command-description">Missing person search assistance</div>
                                <div class="command-triggers">Triggers: /missing command</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Community Support Commands -->
                <div class="voice-commands-section">
                    <h4>üü¢ Community Support Commands</h4>
                    <div class="voice-commands-grid">
                        <div class="voice-command-card community">
                            <div class="command-icon">üßì</div>
                            <div class="command-details">
                                <div class="command-keyword">"help"</div>
                                <div class="command-description">Elderly or senior citizen assistance</div>
                                <div class="command-triggers">Triggers: /helpelder command</div>
                            </div>
                        </div>

                        <div class="voice-command-card community">
                            <div class="command-icon">üí∞</div>
                            <div class="command-details">
                                <div class="command-keyword">"fund"</div>
                                <div class="command-description">Emergency financial assistance</div>
                                <div class="command-triggers">Triggers: /fund command</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Voice Commands Tips -->
                <div class="voice-tips-section">
                    <h4>üí° Voice Commands Tips</h4>
                    <div class="voice-tips-grid">
                        <div class="voice-tip">
                            <i class="fas fa-volume-up"></i>
                            <span>Speak clearly and at normal volume</span>
                        </div>
                        <div class="voice-tip">
                            <i class="fas fa-clock"></i>
                            <span>System listens for 10 seconds per activation</span>
                        </div>
                        <div class="voice-tip">
                            <i class="fas fa-shield-alt"></i>
                            <span>Works in any community chat or direct message</span>
                        </div>
                        <div class="voice-tip">
                            <i class="fas fa-bell"></i>
                            <span>You'll get confirmation when command is recognized</span>
                        </div>
                        <div class="voice-tip">
                            <i class="fas fa-users"></i>
                            <span>Community members will be alerted automatically</span>
                        </div>
                        <div class="voice-tip">
                            <i class="fas fa-ambulance"></i>
                            <span>Official responders notified within seconds</span>
                        </div>
                    </div>
                </div>

                <!-- Voice Activation Button -->
                <div class="voice-activation-section">
                    <button class="voice-activate-btn" id="voiceActivateBtn">
                        <i class="fas fa-microphone" id="activateIcon"></i>
                        <span id="activateText">Start Voice Listening</span>
                    </button>
                    <div class="voice-activation-note">
                        <small>üé§ Click to activate voice recognition and speak any emergency keyword</small>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Help Chatbot Modal -->
    <div id="helpChatbotModal" class="help-chatbot-modal">
        <div class="chatbot-header">
            <div class="chatbot-avatar">
                <i class="fas fa-robot"></i>
            </div>
            <div class="chatbot-info">
                <h3>Community Helper Bot ü§ñ</h3>
                <p>I'm here to help you understand our platform!</p>
            </div>
            <button class="chatbot-close" id="chatbotClose">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="chatbot-content">
            <div id="chatbotMessages" class="chatbot-messages">
                <div class="bot-message">
                    <div class="message-avatar">
                        <i class="fas fa-robot"></i>
                    </div>
                    <div class="message-content">
                        <p>üëã Welcome! I'm your Community Helper Bot. Choose a topic to learn more about our emergency platform:</p>
                    </div>
                </div>
            </div>
            <div id="chatbotQuestions" class="chatbot-questions">
                <!-- Questions will be populated by JavaScript -->
            </div>
        </div>
    </div>

    <script src="app.js"></script>

    <!-- Personal AI Assistant Module -->
    <script src="ai-personal.js"></script>

    <!-- Voice Recognition Module - Add after app.js -->
    <script src="voice-recognition.js"></script>
</body>
</html>
